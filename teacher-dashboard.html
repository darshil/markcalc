<!DOCTYPE html>
<html>
   <head>
      <meta name ="viewport" content ="width=device-width, initial-scale=1.0">
      <!--Bootstrap CSS CDN-->
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
      <link rel="stylesheet" href="https://code.getmdl.io/1.2.1/material.indigo-pink.min.css">
      <script src="https://code.getmdl.io/1.2.1/material.min.js"></script>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
      <!---jQuery CDN-->
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
      <link rel="stylesheet" href="css/home.css">
      <link rel="stylesheet" href="css/styles.css">
      <link rel="stylesheet" href="animations.css">
      <style>
         .view-source{
         position: fixed;
         display: block;
         right: 0;
         bottom: 0;
         margin-right: 40px;
         margin-bottom: 40px;
         z-index: 900;
         }
      </style>
   </head>
   <body>
      <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
         <header class="mdl-layout__header">
            <div class="mdl-layout__header-row">
               <!-- Title -->
               <span class="mdl-layout-title">Dashboard</span>
               <!-- Add spacer, to align navigation to the right -->
               <div class="mdl-layout-spacer"></div>
               <!-- Navigation. We hide it in small screens. -->
               <nav class="mdl-navigation mdl-layout--large-screen-only">
                  <a class="mdl-navigation__link" href="" id="userName"></a>
                  <!-- Right aligned menu below button -->
                  <button id="demo-menu-lower-right"
                     class="mdl-button mdl-js-button userAvatar"> 
                  <img src="" id="userPhoto" class="userAvatar">
                  </button>
                  <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect"
                     for="demo-menu-lower-right">
                     <li class="mdl-menu__item">Profile</li>
                     <li class="mdl menu__item">Settings</li>
                     <li class="mdl-menu__item" id="userLogout">Logout</li>
                  </ul>
               </nav>
            </div>
         </header>
         <div class="mdl-layout__drawer">
            <span class="mdl-layout-title">Menu</span>
            <nav class="mdl-navigation">
               <a class="mdl-navigation__link" href="" id="userName"></a>
               <a class="mdl-navigation__link" href="">Profile</a>
               <a class="mdl-navigation__link" href="">Settings</a>
               <a class="mdl-navigation__link">Logout</a>
            </nav>
         </div>
         <main class="mdl-layout__content">
            <div class="page-content">
                <button id="show-dialog" type="button" class="mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored view-source">  <i class="material-icons">add</i></button>
               <dialog class="mdl-dialog">
                  <h4 class="mdl-dialog__title">Create a Class?</h4>
                  <div class="mdl-dialog__content">
                       <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<input class="mdl-textfield__input" type="text" id="sample3">
						<label class="mdl-textfield__label" id="sample2" for="sample3">Course Name...</label>
						</div>
                  </div>
				   <div class="mdl-dialog__content">
                       <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
						<input class="mdl-textfield__input" type="text" id="sample4">
						<label class="mdl-textfield__label" id="sample1" for="sample4">Course Grade...</label>
						</div>
                  </div>
				  <li class="mdl-list__item">
						<span class="mdl-list__item-primary-content"  id="code" style=" visibility:hidden">
					Hello World
					</span>
					</li>
                  <div class="mdl-dialog__actions">
                     <button type="button" id="userSubmit" class="mdl-button" id="enter">Enter</button>
                     <button type="button" class="mdl-button" id="close">Cancel</button>
                  </div>
               </dialog>
            </div>
         </main>
      </div>
      </div>
      <script>
         var dialog = document.querySelector('dialog');
         var showDialogButton = document.querySelector('#show-dialog');
         if (! dialog.showModal) {
           dialogPolyfill.registerDialog(dialog);
         }
         showDialogButton.addEventListener('click', function() {
           dialog.showModal();
         });
         dialog.querySelector('#close').addEventListener('click', function() {
           dialog.close();
         });
      </script>
      <!--Firebase-->
      <script type="text/javascript">
         function initApp() {
           document.getElementById("userSubmit").addEventListener("click", classCode);
         
           firebase.auth().onAuthStateChanged(function(user) {
         document.getElementById('userLogout').addEventListener('click', userLogout, false);
         
             console.log("Attempted Sign in");
             console.log(user);
             if (user) {
               
               
               // User is signed in.
               console.log("Attempted Sign in successful");
               var displayName = user.displayName;
               var email = user.email;
               var emailVerified = user.emailVerified;
               var photoURL = user.photoURL;
               var isAnonymous = user.isAnonymous;
               var uid = user.uid;
               var refreshToken = user.refreshToken;
               var providerData = user.providerData;
         
         
               console.log(uid);
               console.log(displayName);
               console.log(email);
               console.log(photoURL);
                
         document.getElementById('userName').innerHTML = "Hello, " +  displayName;
         document.getElementById('userPhoto').src= photoURL;
         
         
               if (!emailVerified) {
         
                  firebase.auth().currentUser.sendEmailVerification().then(function() {
         
             console.log('Email Verification Sent!');
           
           });
           
          
                  window.location = 'email-verification.html'
               }
         
              } else {
              // window.location = 'index.html'
             }
         
           });
         
         }
         window.onload = function() {
           initApp();
             ref.onAuth(function(authData) {
         if (authData) {
         console.log("User " + authData.uid + " is logged in with " + authData.provider + authData.email);
         } else {
         console.log("User is logged out");
         }
         });
         };
         
         function userLogout(){
          firebase.auth().signOut().then(function() {
         // Signout success
         console.log("ayy you are logged out");
         }, function(error) {
         // error 
         });
           
         }  
		 
		 function classCode(){
		 			
		  var courseName = document.getElementById("sample3").value;
		  var courseGrade = document.getElementById("sample4").value;
		  document.getElementById("sample3").style.visibility = 'hidden';
		  document.getElementById("sample4").style.visibility = 'hidden';
		  document.getElementById("sample1").style.visibility = 'hidden';
		  document.getElementById("sample2").style.visibility = 'hidden';

		  
		var code  = Math.trunc(Math.random()*1000000);
         document.getElementById("code").style.visibility = 'visible';
        document.getElementById("code").innerHTML = "The code for " + courseName + " is : " + code;
				
		 }
         
      </script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
      <!--Firebase Initialization-->
      <script src="https://www.gstatic.com/firebasejs/3.2.1/firebase.js"></script>
      <script>
         var config = {
         apiKey: "AIzaSyDa_qMIa7N3YZ1GrP8ydQh4xXZetjOC0fs",
         authDomain: "markcalc-beta.firebaseapp.com",
         databaseURL: "https://markcalc-beta.firebaseio.com",
         storageBucket: "markcalc-beta.appspot.com",
         messagingSenderId: "1023910831150"
         };
         firebase.initializeApp(config);
         
      </script>
   </body>
</html>